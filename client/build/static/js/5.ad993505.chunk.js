(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[5],{53:function(e,r,t){},73:function(e,r,t){"use strict";t.r(r);var n=t(67),c=t(17),a=t.n(c),o=t(18),s=t(4),u=t(1),i=t(19),l=t(33),b=t(34),d=t.n(b),h=function(e,r){switch(r.type){case"SUCCESS":return Object(l.a)(Object(l.a)({},e),{},{loading:!1,error:null,post:r.feedback});case"ERROR":return Object(l.a)(Object(l.a)({},e),{},{loading:!1,post:{},error:r.error});case"LOADING":return Object(l.a)(Object(l.a)({},e),{},{loading:!0,post:{},error:null});case"INPUT":return Object(l.a)(Object(l.a)({},e),{},Object(i.a)({},r.targetName,r.targetValue));case"SWITCH":return Object(l.a)(Object(l.a)({},e),{},{currFrom:e.currTo,currTo:e.currFrom});default:return e}},m=(t(53),t(0)),f=Object(u.lazy)((function(){return t.e(9).then(t.bind(null,69))})),p=["USD","EUR","GBP","CHF","PLN","CZK","DKK","HUF","RON","SEK","NOK","ISK","HRK","RUB","TRY","BRL","AUD","CAD","CNY","INR","ILS","MXN","NZD","PHP","SGD","ZAR","IDR","JPY","THB","BGN","KRW","MYR"],j=p.map((function(e,r){return 0===r?p[r+1]:1===r?p[r-1]:e})),O={loading:!1,error:"",post:{},currFrom:"USD",currTo:"EUR",amount:1};r.default=function(e){e.children;var r=function(e,r,t){var n=Object(u.useReducer)(h,t),c=Object(s.a)(n,2),i=c[0],l=c[1],b=function(){var r=Object(o.a)(a.a.mark((function r(t,n,c){var o,s,u;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o={method:"GET",headers:{"content-type":"application/json;charset=utf-8"},params:{urlAddress:e,fromCurrency:t,toCurrency:n,amount:c}},r.next=4,d.a.get("/api/exchange?",o);case 4:if(!1!==(s=r.sent).data.success||!1!==s.data.inputCorrect){r.next=10;break}throw u=s.data.currFromCheck.incorrect+" "+s.data.amountCheck.incorrect,new Error(u);case 10:if(!1!==s.data.success||!0!==s.data.inputCorrect){r.next=12;break}throw new Error(s.data.error);case 12:return r.abrupt("return",s.data);case 15:throw r.prev=15,r.t0=r.catch(0),new Error("Unable to get currency ".concat(t," and ").concat(n," - ").concat(r.t0));case 18:case"end":return r.stop()}}),r,null,[[0,15]])})));return function(e,t,n){return r.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={method:"GET",headers:{"content-type":"application/json;charset=utf-8"},params:{urlAddress:"".concat(r,"/").concat(t),toCurrency:t}},e.next=4,d.a.get("/api/countries?",n);case 4:if(c=e.sent,o=c.data,!1!==c.data.success||!1!==c.data.inputCorrect){e.next=10;break}throw new Error(c.data.currToCheck.incorrect);case 10:if(!1!==c.data.success||!0!==c.data.inputCorrect){e.next=12;break}throw new Error(c.data.error);case 12:return e.abrupt("return",o);case 15:throw e.prev=15,e.t0=e.catch(0),new Error("Unable to get countries using ".concat(t," currency. ").concat(e.t0));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(r){return e.apply(this,arguments)}}();return{state:i,dispatch:l,convertCurrency:function(e,r,t){return new Promise(function(){var n=Object(o.a)(a.a.mark((function n(c,o){var s,u,i,d,h;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m(r);case 3:if(!0!==(s=n.sent).success){n.next=19;break}return u=s.fitCountries,n.next=8,b(e,r,t);case 8:if(i=n.sent,d=(t*i.exchRate).toFixed(2),!0!==i.success){n.next=16;break}h={result:d,date:i.date,countries:u,error:null},l({type:"SUCCESS",feedback:h}),c(),n.next=17;break;case 16:throw new Error("Something was wrong! "+i.error);case 17:n.next=20;break;case 19:throw new Error("Something was wrong! "+s.error);case 20:n.next=26;break;case 22:n.prev=22,n.t0=n.catch(0),l({type:"ERROR",error:n.t0.message}),c();case 26:case"end":return n.stop()}}),n,null,[[0,22]])})));return function(e,r){return n.apply(this,arguments)}}())}}}("https://api.ratesapi.io/api/latest","https://restcountries.eu/rest/v2/currency",O),t=r.state,c=r.dispatch,i=r.convertCurrency,l=Object(u.useState)(t),b=Object(s.a)(l,2),g=b[0],x=b[1],v=Object(u.useRef)([]),w=t.currTo,C=t.currFrom,k=t.amount,y=t.loading,N=t.error,R=Object(u.useCallback)((function(e){e&&!v.current.includes(e)&&v.current.push(e)}),[]);Object(u.useEffect)((function(){v.current[0].focus()}),[]),Object(u.useEffect)((function(){x(t)}),[t.loading]);var S=function(e){if("Enter"===e.key){var r=v.current.findIndex((function(r){return r.id===e.target.id}));r<v.current.length-1&&(e.preventDefault(),v.current[r+1].focus())}},E=function(){var e=Object(o.a)(a.a.mark((function e(r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleSubmit Fn"),v.current[v.current.length-1].disabled=!0,v.current[v.current.length-1].innerHTML="Wait...",c({type:"LOADING"}),r.preventDefault(),e.next=7,i(C,w,k);case 7:v.current[v.current.length-1].disabled=!1,v.current[v.current.length-1].innerHTML="Check";case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),T=Object(u.useCallback)((function(e){c({type:"INPUT",targetName:e.target.name,targetValue:e.target.value})}),[w,C,k]),F=Object(u.useCallback)((function(e){console.log("handleSwitch Fn"),e.preventDefault(),c({type:"SWITCH"})}),[w,C]),D=Object(u.useMemo)((function(){return p.length>0&&[].concat(p).map((function(e,r){return Object(m.jsx)("option",{value:e,children:e},r)}))}),[]),U=Object(u.useMemo)((function(){return j.length>0&&Object(n.a)(j).map((function(e,r){return Object(m.jsx)("option",{value:e,children:e},r)}))}),[]);return Object(m.jsxs)("div",{className:"container currency",children:[Object(m.jsxs)("form",{id:"currency-form",className:"",children:[Object(m.jsxs)("div",{className:"row center",children:[Object(m.jsxs)("div",{className:"col col-sm-3 col-sm-marg form-group",children:[Object(m.jsx)("label",{htmlFor:"amount",children:"Amount"}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"number",className:"form-control",name:"amount","aria-label":"Amount",id:"amount",defaultValue:"1",min:"1",max:"9999999",ref:R,onKeyDown:S,onChange:T})})]}),Object(m.jsxs)("div",{className:"col col-sm-3 col-sm-marg form-group",children:[Object(m.jsx)("label",{htmlFor:"currFrom",children:"From"}),Object(m.jsx)("select",{name:"currFrom",id:"currFrom",className:"form-control form-control-lg",value:C,ref:R,onKeyDown:S,onChange:T,children:D})]}),Object(m.jsxs)("div",{className:"col col-sm-3 col-sm-marg form-group",children:[Object(m.jsx)("label",{htmlFor:"currTo",children:"To"}),Object(m.jsx)("select",{name:"currTo",id:"currTo",className:"form-control form-control-lg",value:w,ref:R,onKeyDown:S,onChange:T,children:U})]})]}),Object(m.jsx)("div",{className:"row center",children:Object(m.jsxs)("div",{className:"buttons col",children:[Object(m.jsx)("button",{className:"btn btn-info btn-switch",onClick:F,children:"switch"}),Object(m.jsx)("button",{type:"submit",className:"btn btn-success btn-check",ref:R,onClick:E,children:"Check"})]})})]}),Object(m.jsx)(u.Suspense,{fallback:Object(m.jsx)("p",{children:"Loading..."}),children:!0===y&&null===N?Object(m.jsx)("span",{className:"answer",children:"loading..."}):Object(m.jsx)(f,{submitState:g})})]})}}}]);
//# sourceMappingURL=5.ad993505.chunk.js.map